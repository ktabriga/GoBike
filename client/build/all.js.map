{"version":3,"sources":["app.js","google-map.js"],"names":[],"mappings":"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","file":"all.js","sourcesContent":["import {module as maps} from 'google-map';\n\n\nangular.module('goBike', [maps])\n  .factory('place', place)\n  .controller('appCtrl', controller);\n\nfunction controller($scope, place) {\n  var vm = this;\n\n  vm.send = () => {\n    console.log(coordinates($scope.markers));\n    if ($scope.markers.length === 0) {\n      return Materialize.toast(\"Selecione pelo menos um local =)\", 4000)\n    }\n\n    function coordinates(markers) {\n      return markers.map(marker => ({\n        latitude: marker.position.A,\n        longitude: marker.position.F\n      }))\n    }\n\n    place.save(coordinates($scope.markers))\n      .then(() => {\n        $scope.clearAll();\n        Materialize.toast('Seus locais foram enviados. Obrigado por participar =)', 6000)\n      }).catch(data => {\n        console.log(data);\n        Materialize.toast('Desculpe, seus dados n√£o foram enviados.=(', 4000)\n      })\n\n  }\n}\n\n\nfunction place($http) {\n  return {\n    save(markers) {\n      return $http({\n        method: 'POST',\n        url: '/api/places',\n        data: markers\n      });\n    }\n  };\n}","export var module = 'maps';\n\nangular.module(module, [])\n  .directive('map', directive);\n\nfunction directive() {\n  return {\n    restrict: 'E',\n    template: '<div id=\"map\"></div>',\n    link\n  }\n}\n\nfunction link(scope, element, attrs) {\n  function initialize() {\n    var mapOptions = {\n      center: { lat: -23.42022, lng: -51.9433462},\n      zoom: 13\n    };\n    var map = new google.maps.Map(document.getElementById('map'), mapOptions);\n\n    var markers = [];\n    scope.markers = markers;\n\n    var removeMarker = marker => {\n      return function () {\n        marker.setMap(null);\n        markers.splice(markers.indexOf(marker), 1);\n      }\n    };\n\n    scope.clearAll = () => {\n      markers.forEach(marker => marker.setMap(null));\n      markers = [];\n      scope.markers = markers;\n    };\n\n    var addMarker  = location => {\n      var marker = new google.maps.Marker({\n        position: location,\n        map: map\n      });\n      markers.push(marker);\n      google.maps.event.addListener(marker, 'click', removeMarker(marker));\n    };\n\n    google.maps.event.addListener(map, 'click', function (event) {\n      addMarker(event.latLng);\n    });\n  }\n\n\n  google.maps.event.addDomListener(window, 'load', initialize);\n}"],"sourceRoot":"/source/"}